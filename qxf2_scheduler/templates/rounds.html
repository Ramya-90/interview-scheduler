<html>

<head>
    <title>
        List of rounds
    </title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Stylesheets-->
    <link href="/static/css/qxf2_scheduler.css" rel="stylesheet">
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!--JS files-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    
    
  
</head>

<body>
    <div id="dialog-confirm" title="Delete round?">
        <p><span class="ui-icon ui-icon-alert" style="float:left; margin:12px 12px 20px 0;"></span>These round will be permanently deleted and cannot be recovered. Are you sure?</p>
    </div>
    <div class="container col-md-offset-1">
        <h2 class="grey_text text-center">Rounds List</h2>
            <div class="row-fluid top-space-20">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Add rounds</th>
                        </tr>
                    </thead>
                    <tbody>
                        <td><input type="button" class="btn btn-info" value="Add round1">
                            <input type="button" class="btn btn-info" value="Add round2">
                            <input type="button" class="btn btn-info" value="Add round3">
                        </td>


                    </tbody>
                </table>
            </div>
            <div class="row-fluid top-space-20">
                <table class="table table-striped">
                    <thead>
                        <th>Round duration</th>
                        <th>Round Description</th>
                        <th>Round requirements</th>
                        <th>Actions</th>
                    </thead>
                    {% for each_item in result %}
                    <tbody>
                        <td>{{each_item.round_time}}</td>
                        <td>{{each_item.round_description}}</td>
                        <td>{{each_item.round_requirement}}</td>
                        <td>
                            <input type="button" class="btn btn-info" value="Edit" id="edit-button" data-edit-round-id="{{each_item.round_id}}" />
                            <input type="button" class="btn btn-info" onclick="delete_round(this)" value="Delete" id="delete-button{{each_item.round_id}}" data-delete-round-id="{{each_item.round_id}}" data-delete-job-id="{{each_item.job_id}}" />
                        </td>   
                    </tbody>
                    {% endfor %}
                </table>
            </div>
            </div>
            
    <script>
        //Confirmation message for deleteing round
        var round_id;
        var job_id;
        var dialog = $("#dialog-confirm").dialog({
        resizable: false,
        height: "auto",
        autoOpen: false,
        width: 400,
        modal: true,
        buttons: {         
        "Delete": function() {
        console.log("round_id"+round_id)
        $.ajax({
        type: 'GET',
        url: '/rounds/'+ job_id +'/'+ round_id +'/delete',
        data: {'round_id':round_id},
        success: function (data) {
        window.location.reload();
        console.log("successfully deleted the data")
        }
        })
        $( this ).dialog( "close" );
        },
        Cancel: function() {
        $( this ).dialog( "close" );
        }
        }
        });
        function delete_round(action_delete){
        round_id = action_delete.getAttribute("data-delete-round-id");
        job_id = action_delete.getAttribute("data-delete-job-id");
        dialog.dialog( "open" );
        }
    </script> 
     
</body>
</html>