<html>
    <head>
        <title>
            Candidate job status
        </title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Stylesheets-->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="http://getbootstrap.com/2.3.2/assets/css/bootstrap.css" rel="stylesheet" />
    <!--JS-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    

    </head>

    <body>
        <h2 class="grey_text text-center">Candidate Details</h2>
        <div class="container col-md-offset-1">
                
                <div class="col-md-8">
                    <input type="unique-url" id="generate-url" value="generate url" disabled="true"/>
                    <button class="btn btn-info" id="urlbutton" type="submit">Generate URL</button>
                </div>
                 
            <table class="table table-striped">
                <thead>
                   <tr> 
                        <th scope="col">Candidate Name</th>
                        <th>Job Applied</th>      
                    </tr>
                </thead>
                <tbody>
                   {% if result!="" %}
                    <tr>
                        <td>{{ result.candidate_name }}</td>
                        <td>{{ result.job_applied }}</td>
                    </tr>
                    {% endif %}
                </tbody>
        </table>
    </div>
    
    <script>
            $("#urlbutton").on('click', function () {
            var candidateId="{{ result.candidate_id }}";
            var jobId="{{ result.job_id }}";
            console.log("clicked on generate url button jid"+jobId+"cid"+candidateId);
            $.ajax({
                    type: ['GET','POST'],
                    url: '/candidate/url',
                    data: { 
                        'candidate_id':candidateId, 
                        'job_id': jobId 
                        },
                    success: function (data) {
                        console.log("it's a success:"+data.url);
                        var utl_textbox = document.getElementById("generate-url"); 
                        utl_textbox.setAttribute('value', data.url);  
                    }
                })   
        }) 
    </script>
</body>
</html>   